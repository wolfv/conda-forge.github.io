"use strict";(self.webpackChunkcf_infra_docs=self.webpackChunkcf_infra_docs||[]).push([[812],{80295:(t,e,i)=>{i.d(e,{O:()=>a,j:()=>r});const a={usage:{options:{responsive:!0,plugins:{legend:{display:!1}},scales:{x:{type:"time",time:{minUnit:"hour"}},y:{beginAtZero:!0,precision:0}}}}},r={cloud:{anaconda:{api:"https://sqvvxmkr4r26.statuspage.io/api/v2/status.json",link:"https://anaconda.statuspage.io/",title:"Anaconda"},appveyor:{api:"https://status.appveyor.com/api/v2/status.json",link:"https://status.appveyor.com/",title:"AppVeyor"},azure:{api:"https://conda-forge.herokuapp.com/status-monitor/azure",link:"https://status.dev.azure.com/",title:"Azure DevOps"},circle:{api:"https://status.circleci.com/api/v2/status.json",link:"https://status.circleci.com",title:"Circle CI"},github:{api:"https://www.githubstatus.com/api/v2/status.json",link:"https://www.githubstatus.com/",title:"GitHub"},open_gpu_server:{api:"https://conda-forge.herokuapp.com/status-monitor/open-gpu-server",link:"https://ci-status.quansight.dev/",title:"Open GPU Server"},quay:{api:"https://status.redhat.com/api/v2/status.json",link:"https://status.redhat.com/",title:"Quay.io"},travis:{api:"https://www.traviscistatus.com/api/v2/status.json",link:"https://www.traviscistatus.com/",title:"Travis CI"}},azure:{pipelines:"https://conda-forge.herokuapp.com/status-monitor/report/azure-pipelines",status:"https://conda-forge.herokuapp.com/status-monitor/azure"},github:{actions:"https://conda-forge.herokuapp.com/status-monitor/report/github-actions"},stats:"https://raw.githubusercontent.com/conda-forge/by-the-numbers/main/data/live_counts.json",migrations:{details:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/migration_json/<NAME>.json",graph:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/migration_svg/<NAME>.svg?sanitize=true",status:{closed:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/closed_status.json",longterm:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/longterm_status.json",regular:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/regular_status.json"}},repos:{badges:[{name:"conda-forge documentation",link:"https://github.com/conda-forge/conda-forge.github.io",badge:"https://github.com/conda-forge/conda-forge.github.io/workflows/deploy/badge.svg",badgeLink:"https://github.com/conda-forge/conda-forge.github.io/actions?query=workflow%3Adeploy"},{name:"autotick bot",link:"https://github.com/regro/cf-scripts",badge:"https://github.com/regro/cf-scripts/actions/workflows/bot-bot.yml/badge.svg",badgeLink:"https://github.com/regro/cf-scripts/actions"},{name:"feedstock creation",link:"https://github.com/conda-forge/staged-recipes",badge:"https://github.com/conda-forge/admin-requests/actions/workflows/create_feedstocks.yml/badge.svg",badgeLink:"https://github.com/conda-forge/admin-requests/actions/workflows/create_feedstocks.yml"},{name:"admin migrations",link:"https://github.com/conda-forge/admin-migrations",badge:"https://github.com/conda-forge/admin-migrations/actions/workflows/migrate.yml/badge.svg",badgeLink:"https://github.com/conda-forge/admin-migrations/actions/workflows/migrate.yml"}],cdn:{api:"https://s3.amazonaws.com/conda-static.anaconda.org/conda-forge/last-updated",link:"https://conda-static.anaconda.org/conda-forge/rss.xml"},services:{api:"https://conda-forge.herokuapp.com/alive",link:"https://github.com/conda-forge/conda-forge-webservices"}},travis:{usage:"https://conda-forge.herokuapp.com/status-monitor/report/travis-ci"},versions:{api:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/version_status.json",pr:"https://github.com/conda-forge/<NAME>-feedstock/blob/main/recipe/meta.yaml"},schemas:{"conda-forge.yml":"https://raw.githubusercontent.com/conda-forge/conda-smithy/main/conda_smithy/data/conda-forge.json"}}},86342:(t,e,i)=>{i.r(e),i.d(e,{default:()=>p,measureProgress:()=>u});var a=i(16550),r=i(52263),s=i(80295),n=i(80647),o=i(67294),l=i(80708);const c={migration_details:"migration_details_INtU",migration_details_bar:"migration_details_bar_HfK3",migration_details_toggle:"migration_details_toggle__YNI",migration_details_filter:"migration_details_filter_cpRW",migration_details_filter_button:"migration_details_filter_button_DcbR",migration_details_filter_done:"migration_details_filter_done_HPjH",migration_details_filter_done_hidden:"migration_details_filter_done_hidden_MAZZ",migration_details_filter_in_pr:"migration_details_filter_in_pr_lv2H",migration_details_filter_in_pr_hidden:"migration_details_filter_in_pr_hidden_eRVs",migration_details_filter_awaiting_pr:"migration_details_filter_awaiting_pr_cLot",migration_details_filter_awaiting_pr_hidden:"migration_details_filter_awaiting_pr_hidden__f2a",migration_details_filter_awaiting_parents:"migration_details_filter_awaiting_parents_qibn",migration_details_filter_awaiting_parents_hidden:"migration_details_filter_awaiting_parents_hidden_vgz0",migration_details_filter_not_solvable:"migration_details_filter_not_solvable_sbZh",migration_details_filter_not_solvable_hidden:"migration_details_filter_not_solvable_hidden_csRp",migration_details_filter_bot_error:"migration_details_filter_bot_error_kVbU",migration_details_filter_bot_error_hidden:"migration_details_filter_bot_error_hidden_f8nM",migration_details_filter_icon:"migration_details_filter_icon_U6Yo",collapsed:"collapsed_Rsep",expanded:"expanded_bFKe",migration_details_bar_tooltip:"migration_details_bar_tooltip_GmsJ",migration_details_filter_dot:"migration_details_filter_dot_f6OS",migration_details_filter_in_pr_dot:"migration_details_filter_in_pr_dot_MrJT",migration_details_filter_title_container:"migration_details_filter_title_container_bqwK"};var d=i(20684),_=i(85893);const g=[["done","Done",!0],["in-pr","In PR",!1],["awaiting-pr","Awaiting PR",!1],["awaiting-parents","Awaiting parents",!1],["not-solvable","Not solvable",!1],["bot-error","Bot error",!1]],m=g.reduce(((t,e)=>{let[i,a]=e;return{...t,[i]:a}}),{}),h="migration-toggle";function u(t){const e=t.done.length+t["in-pr"].length,i=e+t["awaiting-parents"].length+t["awaiting-pr"].length+t["bot-error"].length+t["not-solvable"].length;return{done:e,percentage:e/(i||1)*100,total:i}}function p(){const t=(0,a.TH)(),{siteConfig:e}=(0,r.Z)(),[i,l]=(0,o.useState)({name:new URLSearchParams(t.search).get("name"),details:null,redirect:!1,view:"table"}),d=t=>{if(window&&window.localStorage)try{window.localStorage.setItem(h,t)}catch(e){console.warn("error writing to local storage",e)}l((e=>({...e,view:t})))};if((0,o.useEffect)((()=>{if(!i.name)return l((t=>({...t,redirect:!0})));let t="";if(window&&window.localStorage)try{t=window.localStorage.getItem(h)}catch(e){console.warn("error reading from local storage",e)}(async()=>{try{const e=s.j.migrations.details.replace("<NAME>",i.name),a=await(await fetch(e)).json();a.progress=u(a),l((e=>({...e,details:a,view:t||e.view})))}catch(e){console.warn(`error loading migration: ${i.name}`,e),l((t=>({...t,redirect:!0})))}})()}),[]),i.redirect)return(0,_.jsx)(a.l_,{to:"/status",replace:!0});const{details:g,name:m,view:p}=i;return(0,_.jsx)(n.Z,{title:e.title,description:"Status dashboard for conda-forge",children:(0,_.jsx)("main",{className:`container ${c.migration_details}`,children:(0,_.jsxs)("div",{className:"card margin-top--xs",children:[(0,_.jsxs)("div",{className:"card__header",children:[(0,_.jsxs)("div",{className:c.migration_details_toggle,children:[(0,_.jsx)("button",{onClick:()=>d("table"),children:"Table View"})," ",(0,_.jsx)("button",{onClick:()=>d("graph"),children:"Graph View"})]}),(0,_.jsx)(b,{children:m}),(0,_.jsx)("div",{style:{clear:"both"}})]}),(0,_.jsxs)("div",{className:"card__body",style:{overflow:"auto"},children:[g&&(0,_.jsx)(f,{details:g}),"graph"===p?(0,_.jsx)(x,{children:m}):g&&(0,_.jsx)(w,{details:g})]})]})})})}function f(t){let{details:e}=t;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("h4",{children:["PRs made ",e.progress.percentage.toFixed(0),"%"]}),(0,_.jsx)("div",{className:c.migration_details_bar,children:g.filter((t=>{let[i]=t;return e[i]?.length})).map(((t,i)=>{let[a]=t;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("a",{id:`migration-bar-element-${a}`,className:c[`migration_details_filter_${a.replace("-","_")}`],style:{flex:e[a].length},alt:m[a]+" "+parseFloat(100*e[a].length/u(e).total).toFixed(1)+"% ("+e[a].length+" PRs over "+u(e).total+")"},i),(0,_.jsx)(d.u,{anchorSelect:`#migration-bar-element-${a}`,place:"top",className:c.migration_details_bar_tooltip,children:(0,_.jsx)("div",{children:m[a]})})]})}))})]})}function b(t){let{children:e}=t;return(0,_.jsx)("nav",{"aria-label":"breadcrumbs",children:(0,_.jsxs)("ul",{className:"breadcrumbs",children:[(0,_.jsx)("li",{className:"breadcrumbs__item",children:(0,_.jsx)("a",{className:"breadcrumbs__link",href:"/",children:"conda-forge"})}),(0,_.jsx)("li",{className:"breadcrumbs__item",children:(0,_.jsx)("a",{className:"breadcrumbs__link",href:"/status",children:"Status"})}),(0,_.jsx)("li",{className:"breadcrumbs__item",children:(0,_.jsx)("a",{className:"breadcrumbs__link",href:"/status#migrations",children:"Migrations"})}),(0,_.jsx)("li",{className:"breadcrumbs__item breadcrumbs__item--active",children:(0,_.jsx)("a",{className:"breadcrumbs__link",href:"",children:e})})]})})}function j(t){let{counts:e,filters:i,onFilter:a}=t;return(0,_.jsx)("div",{className:c.migration_details_filter,children:g.map(((t,r)=>{let[s,n]=t;const o=`migration_details_filter_${s.replace("-","_")}`;return(0,_.jsxs)("div",{className:["button",c.migration_details_filter_button,i[s]?"button--secondary":"button--primary"].join(" "),onClick:()=>a(s),children:[i[s]?(0,_.jsx)("span",{className:[c[`${o}_hidden`],c.migration_details_filter_dot,c[`${o}_dot`]].join(" ")}):(0,_.jsx)("span",{className:[c[o],c.migration_details_filter_dot,c[`${o}_dot`]].join(" ")}),(0,_.jsxs)("div",{className:c.migration_details_filter_title_container,children:[n," (",e[s],")"]})]},r)}))})}function x(t){const[e,i]=(0,o.useState)(""),a=s.j.migrations.graph.replace("<NAME>",t.children);return(0,_.jsxs)("div",{children:[(0,_.jsx)("p",{style:{textAlign:"center"},children:(0,_.jsx)("a",{href:a,target:"blank",rel:"noopener noreferrer",children:(0,_.jsxs)("code",{children:[t.children,".svg"]})})}),e?(0,_.jsx)("p",{style:{textAlign:"center"},children:"Graph is unavailable."}):(0,_.jsx)("div",{style:{overflowX:"auto"},children:(0,_.jsx)(l.Z,{onError:t=>i(t),src:a,title:t.children,description:`Migration graph for ${t.children}`})})]})}function w(t){let{details:e}=t;const i=g.reduce(((t,e)=>{let[i,a,r]=e;return{...t,[i]:r}}),{}),[a,r]=(0,o.useState)(i),s=e._feedstock_status,n=g.reduce(((t,i)=>{let[r]=i;return a[r]?t:t.concat(e[r].map((t=>[t,r])))}),[]).sort(((t,e)=>s[e[0]].num_descendants-s[t[0]].num_descendants||g.findIndex((e=>e[0]==t[1]))-g.findIndex((t=>t[0]==e[1]))||t[0].localeCompare(e[0])));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(j,{counts:g.reduce(((t,i)=>{let[a]=i;return{...t,[a]:e[a]?.length}}),{}),filters:{...a},onFilter:t=>r((e=>({...e,[t]:!e[t]})))}),n.length>0&&(0,_.jsxs)("table",{children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("th",{style:{width:200},children:"Name"}),(0,_.jsx)("th",{style:{width:115},children:"Status"}),(0,_.jsx)("th",{style:{width:115},children:"Total number of children"}),(0,_.jsx)("th",{style:{flex:1},children:"Immediate children"})]})}),(0,_.jsx)("tbody",{children:n.map(((t,e)=>{let[i,a]=t;return(0,_.jsx)(v,{children:{feedstock:s[i],name:i,status:a}},e)}))})]})]})}function v(t){let{children:e}=t;const[i,a]=(0,o.useState)(!0),{feedstock:r,name:s,status:n}=e,l=r.immediate_children||[],d=r.num_descendants,g=r.pr_url,h=r.pre_pr_migrator_status;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:g?(0,_.jsx)("a",{href:g,children:s}):h?(0,_.jsx)("span",{className:`${i?c.collapsed:c.expanded}`,onClick:()=>a(!i),children:s}):(0,_.jsx)("span",{children:s})}),(0,_.jsx)("td",{style:{textAlign:"center"},children:m[n]}),(0,_.jsx)("td",{style:{textAlign:"center"},children:d||null}),(0,_.jsx)("td",{children:l.map(((t,e)=>(0,_.jsxs)(o.Fragment,{children:[(0,_.jsx)("span",{style:{marginBottom:1},className:"badge badge--secondary",children:t}),l.length-1===e?"":" "]},e)))})]}),h&&!i&&(0,_.jsx)("tr",{children:(0,_.jsx)("td",{colSpan:4,children:(0,_.jsx)("pre",{dangerouslySetInnerHTML:{__html:h}})})})]})}}}]);